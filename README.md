# Temperature Monitor GUI - Lab 6

## Описание

GUI приложение на C с использованием GTK3 для отображения данных мониторинга температуры. Приложение подключается к HTTP-серверу из лабы 5 и отображает данные в графическом виде.

## Функционал

1. **Отображение текущей температуры** с временной меткой
2. **График почасовых данных** за последние 24 часа (линейный график)
3. **График дневных средних** за последний месяц (столбчатая диаграмма)
4. **Автоматическое обновление** данных каждые 30 секунд
5. **Кнопка ручного обновления** для немедленного получения свежих данных

## Требования

### Системные библиотеки

- GTK+ 3.0
- libcurl
- json-c
- CMake 3.10+
- GCC или Clang

### Установка зависимостей

#### Ubuntu/Debian

```bash
sudo apt-get update
sudo apt-get install -y \
    build-essential \
    cmake \
    libgtk-3-dev \
    libcurl4-openssl-dev \
    libjson-c-dev
```

#### macOS

```bash
brew install gtk+3 curl json-c pkg-config
```

#### Windows (MSYS2/MinGW)

```bash
pacman -S mingw-w64-x86_64-gtk3 \
          mingw-w64-x86_64-curl \
          mingw-w64-x86_64-json-c \
          mingw-w64-x86_64-cmake \
          mingw-w64-x86_64-gcc
```

## Сборка

### Linux/macOS

```bash
sh scripts/build_linux.sh
```

### Windows

```cmd
cd scripts
build_windows.cmd
```

## Использование

### 1. Запустить сервер из лабы 5

Сначала нужно запустить температурный сервер:

```bash
cd labs/5
sh scripts/generate_data.sh
sh scripts/build_linux.sh
./build/bin/temp_monitor --http 8080
```

### 2. Запустить GUI приложение

```bash
cd labs/6
./build/bin/temp_monitor_gui
```

## Особенности реализации

### GUI компоненты

- **Главное окно**: 1000x700 пикселей
- **Панель текущей температуры**: показывает актуальное значение
- **Два графика**: 
  - Левый: почасовые данные (линейный график)
  - Правый: дневные средние (столбчатая диаграмма)

### Графики

Графики рисуются с помощью Cairo (входит в GTK):
- Автоматическое масштабирование по оси Y
- Сетка для удобства чтения
- Подписи осей
- Интерактивная отрисовка

### API клиент

- Использует libcurl для HTTP-запросов
- JSON парсинг через json-c
- Кэширование данных для быстрой отрисовки
- Автоматическое переподключение при ошибках

## API Endpoints

Приложение использует следующие endpoints сервера:

- `GET /api/current` - текущая температура
- `GET /api/hourly` - почасовые данные
- `GET /api/daily` - дневные данные

## Скриншот функциональности

Приложение отображает:
1. Заголовок с иконкой термометра
2. Большое значение текущей температуры
3. Временную метку последнего обновления
4. Кнопку обновления данных
5. Два графика рядом с автоматическим масштабированием

## Отладка

Для отладки можно использовать:

```bash
# Проверка подключения к серверу
curl http://localhost:8080/api/current

# Запуск с отладочной информацией GTK
GTK_DEBUG=interactive ./bin/temp_monitor_gui
```

## Кроссплатформенность

Приложение полностью кроссплатформенное и работает на:
- Linux (протестировано на Ubuntu 20.04+)
- macOS (10.15+)
- Windows 10/11 (через MinGW)

## Расширение функционала

Можно добавить:
- Выбор периода отображения
- Экспорт графиков в изображения
- Уведомления при превышении пороговых значений
- Настройки интервала обновления
- Несколько источников данных одновременно
